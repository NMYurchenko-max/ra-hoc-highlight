## React. Mark popular media using HOC - Media Gallery

–ü–æ–¥—Å–≤–µ—á–∏–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ —Å–æ —Å—Ç–∞—Ç—å—è–º–∏ –∏ –≤–∏–¥–µ–æ–∑–∞–ø–∏—Å—è–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Higher-Order Component (HOC).

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ GitHub Actions
![CI](https://github.com/NMYurchenko-max/ra-hoc-highlight/actions/workflows/web.yml/badge.svg)

[Deploy](https://nmyurchenko-max.github.io/ra-hoc-highlight/)

### üåê –ñ–∏–≤–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
![–°–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](./src/assets/media-gallery.png)


<video controls src="src/assets/media-gallery.mp4" title="Title" width="640" height="360"></video>

[–í–∏–¥–µ–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏](./src/assets/media-gallery.mp4)

### üìã –ó–∞–¥–∞—á–∞

[Netology.Task](https://github.com/netology-code/ra16-homeworks/blob/ra-51/hoc/highlight/README.md)

###  –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **GitHub Actions** –¥–ª—è CI/CD
- **React 19** —Å TypeScript
- **Vite** –¥–ª—è —Å–±–æ—Ä–∫–∏
- **CSS Modules** –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TypeScript generics**:
  * –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ø–æ–∑–≤–æ–ª–∏–ª –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Popular/New –∏ —É–ø—Ä–æ—Å—Ç–∏–ª —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å HOC.
  * –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–¥–∏–æ–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –æ–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `MediaList` –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å –º–µ–¥–∏–∞-–¥–∞–Ω–Ω—ã–º–∏, –∏ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ Article.tsx       # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å—Ç–∞—Ç–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ Audio.tsx         # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∞—É–¥–∏–æ
‚îÇ   ‚îú‚îÄ‚îÄ Image.tsx         # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ index.ts          # –≠–∫—Å–ø–æ—Ä—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ Pdf.tsx           # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è PDF
‚îÇ   ‚îú‚îÄ‚îÄ Video.tsx         # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤–∏–¥–µ–æ
‚îÇ   ‚îú‚îÄ‚îÄ withMediaWrapper.tsx  # HOC –¥–ª—è –æ–±—ë—Ä—Ç–∫–∏ –º–µ–¥–∏–∞
‚îÇ   ‚îî‚îÄ‚îÄ WrappedMedia.tsx  # –û–±—ë—Ä–Ω—É—Ç—ã–π –º–µ–¥–∏–∞-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îú‚îÄ‚îÄ dataSources/
‚îÇ   ‚îú‚îÄ‚îÄ localData.ts      # –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ media.json        # –î–∞–Ω–Ω—ã–µ –º–µ–¥–∏–∞
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ type.ts           # –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ assets/               # –ê—Å—Å–µ—Ç—ã
‚îú‚îÄ‚îÄ audio/                # –ê—É–¥–∏–æ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ img/                  # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ pdf/                  # PDF —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ video/                # –í–∏–¥–µ–æ —Ñ–∞–π–ª—ã
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è HOC withMediaWrapper

```tsx
const withMediaWrapper = <T extends { views: number }>(
  WrappedComponent: React.ComponentType<T>
) => {
  return function MediaWrapper(props: T) {
    const { views } = props;

    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å –∏ –±–µ–π–¥–∂–∏–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
    let wrapperClass = 'wrap-item-regular';
    let badgeText = '';

    if (views <= 100) {
      wrapperClass = 'wrap-item-new';
      badgeText = 'New';
    } else if (views > 1000) {
      wrapperClass = 'wrap-item-popular';
      badgeText = 'Popular';
    }

    return (
      <div className={wrapperClass}>
        {badgeText && <span className="label">{badgeText}</span>}
        {/* –ü–µ—Ä–µ–¥–∞—ë–º –≤—Å–µ –ø—Ä–æ–ø—Å—ã, –≤–∫–ª—é—á–∞—è views */}
        {React.createElement(WrappedComponent, props)}
      </div>
    );
  };
};
```

### –õ–æ–≥–∏–∫–∞ –ø–æ–¥—Å–≤–µ—Ç–∫–∏
- **Popular**: views >= 1000
- **New**: views <= 100

### –¢–∏–ø—ã –æ–±—ä–µ–¥–µ–Ω–µ–Ω—ã –≤ –æ–¥–∏–Ω —Ç–∏–ø Media (–±–ª–∞–≥–æ–¥–∞—Ä—è generics)

```ts
type Media = VideoMedia | ArticleMedia;
interface BaseMedia {
  views: number;
  type: MediaType;
}
```
## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
clone https://github.com/NMYurchenko-max/ra-hoc-highlight.git

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
cd ra-hoc-highlight
yarn install

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
yarn dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
yarn build

# –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–±–æ—Ä–∫–∏
yarn preview

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
yarn test

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
yarn typecheck

# –õ–∏–Ω—Ç–∏–Ω–≥
yarn lint
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ê–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ (c) 2025 –ù.–Æ—Ä—á–µ–Ω–∫–æ
[–õ–∏—Ü–µ–Ω–∑–∏—è ISC](LICENSE)

## PS:

1. –í `React-player` v3 API –∏–∑–º–µ–Ω–∏–ª—Å—è: –ø—Ä–æ–ø—Å–∞ url –±–æ–ª—å—à–µ –Ω–µ—Ç,
–≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è src –∏ –≤–Ω—É—Ç—Ä–∏ –ø–∞–∫–µ—Ç–∞ –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Ç–∏–ø—ã.
2. YouTube –≤ –†–æ—Å—Å–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—ç—Ç–æ–º—É –µ–≥–æ —Å—Å—ã–ª–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è.
3. –£ –º–µ–Ω—è –Ω–µ –≤—Å–µ –∑–∞–¥—É–º–∞–Ω–Ω–æ–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å:
 - –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–∞–ª–ª–µ—Ä–µ–µ–π (–∫–æ–¥ –ø—Ä–æ–ø–∏—Å–∞–Ω –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö)
  –≤–∞—Ä–∏–∞–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –ø–∞–ø–æ–∫ `src/img, video, audio`;
 - –Ω–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å iframe –æ—Ç "–Ø–Ω–µ–¥–µ–∫—Å –º—É–∑—ã–∫–∞", –∏  —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã –æ–±–ª–∞–∫–æ–≤,...;
 - –≤ —Å–≤—è–∑–∏ —Å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ–¥–∏–∞ –ø–µ—Ä–µ–æ–ø–µ–¥–µ–ª—è–ª–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–º–ø–∞–Ω–µ–Ω—Ç–æ–≤ –≤ App.css
  –≤—Ä—É—á–Ω—É—é –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≥–∞–ª–ª–µ—Ä–µ–∏.

üôè –ó–∞—Ä–∞–Ω–µ–µ –±–ª–∞–≥–æ–¥–∞—Ä—é –µ—Å–ª–∏ –≤—ã —Å–æ—á—Ç–µ—Ç–µ –≤–æ–∑–º–æ–∂–Ω—ã–º –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –æ–ø—ã—Ç–æ–º —Ä–µ—à–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º,
  —ç—Ç–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–ª–∞–Ω –±—É–¥—É—â–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π.

---

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ OOM

–í –ø—Ä–æ–µ–∫—Ç –±—ã–ª–∏ –≤–Ω–µ—Å–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ 
–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–∫–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏ (OOM) –ø—Ä–∏ —Å–±–æ—Ä–∫–µ:

- –í `vite.config.ts` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–æ–¥-—Å–ø–ª–∏—Ç—Ç–∏–Ω–≥ (code splitting), 
  –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑–¥–µ–ª—è–µ—Ç –∫—Ä—É–ø–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (`react-player`, `dashjs`, `media-chrome`, `hls.js`) 
  –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —á–∞–Ω–∫–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏—Ö –ª–µ–Ω–∏–≤–æ –∏ —É–ª—É—á—à–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ.
- –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Ä–∞–∑–º–µ—Ä–µ —á–∞–Ω–∫–∞ –¥–æ 1000 –∫–ë, 
  —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ª–∏—à–Ω–∏—Ö –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –ø—Ä–∏ —Å–±–æ—Ä–∫–µ.
- –í `App.tsx` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–µ–Ω–∏–≤—è –∑–∞–≥—Ä—É–∑–∫–∞ (lazy loading) –º–µ–¥–∏–∞-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `React.lazy` –∏ `Suspense`.
- –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö `Video.tsx` –∏ `Image.tsx` –¥–æ–±–∞–≤–ª–µ–Ω –∞—Ç—Ä–∏–±—É—Ç `loading="lazy"` –¥–ª—è –º–µ–¥–∏–∞-—ç–ª–µ–º–µ–Ω—Ç–æ–≤,
   —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä—É –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏—Ö –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

–£–ª—É—á—à–µ–Ω—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, 
–æ–¥–Ω–∞–∫–æ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–µ–¥–∏–æ–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ —Å—Å—ã–ª–∫–∞–º GitHub Actions –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏.
